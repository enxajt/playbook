# wheelはcentos devianはsudo らしいが、nopasswdをwheelとする。
- name: make sure we have a 'wheel' group
  become: yes
  become_user: root
  group:
    name: wheel
    state: present
- name: Allow 'wheel' group to have passwordless sudo
  become: yes
  become_user: root
  lineinfile:
    dest: /etc/sudoers
    state: present
    regexp: '^%wheel'
    line: '%wheel ALL=(ALL) NOPASSWD: ALL'
- name: add user to wheel group
  become: yes
  become_user: root
  user: name="{{ ubuntu_user }}" password="{{ 'enxajt'|password_hash('sha512') }}" shell=/bin/zsh state=present append=yes groups=wheel

- name: add user to wheel group
  become: yes
  become_user: root
  user: name="{{ ubuntu_user }}" password="{{ 'enxajt'|password_hash('sha512') }}" shell=/bin/zsh state=present append=yes groups=wheel

- name: DL .zshrc
  become: yes
  become_user: "{{ ubuntu_user }}"
  get_url:
    url: https://raw.githubusercontent.com/enxajt/linux/master/.zshrc
    dest: ~/.zshrc

- name: DL .tmux.conf
  become: yes
  become_user: "{{ ubuntu_user }}"
  get_url:
    url: https://raw.githubusercontent.com/enxajt/linux/master/.tmux.conf
    dest: ~/.tmux.conf

- name: xterm
  become: yes
  become_user: "{{ ubuntu_user }}"
  get_url:
    url: https://raw.githubusercontent.com/enxajt/xterm/master/.Xresources
    dest: ~/.Xresources

- name: install Dropbox
  become: yes
  become_user: "{{ ubuntu_user }}"
  shell: cd ~/ && wget -O - "https://www.dropbox.com/download?plat=lnx.x86_64" | tar xzf -

- name: install Dropbox tool
  become: yes
  become_user: root
  #shell: mkdir ~/bin && wget -O ~/bin/dropbox "http://www.dropbox.com/download?dl=packages/dropbox.py" && chmod a+x ~/bin/dropbox
  shell: wget -O /usr/bin/dropbox "http://www.dropbox.com/download?dl=packages/dropbox.py" && chmod a+x /usr/bin/dropbox && dropbox lansync n
    # && chmod 777 -R ~/Dropbox

- name: mkln shared
  become: yes
  become_user: "{{ ubuntu_user }}"
  shell: ln -s /opt/shared ~/shared
