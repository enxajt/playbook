---
#refer list in Japan
#- name: change mirror
#  become: yes
#  replace: |
#    dest=/etc/apt/sources.list
#    regexp=http://(archive|security)\.ubuntu\.com/ubuntu(.+)
#    replace=http://ftp.riken.go.jp/Linux/ubuntu\2
#  register: apt_mirror
#- name: apt update
#  become: yes
#  apt: update_cache=yes
#  when: apt_mirror|changed

# Windowsで作成した日本語を含むzipファイルを展開しても文字化けしないように
- name: add apt-key JapTeam package repository
  shell: wget -q https://www.ubuntulinux.jp/ubuntu-ja-archive-keyring.gpg -O- | apt-key add -
- name: add apt-key JapTeam package repository
  shell: wget -q https://www.ubuntulinux.jp/ubuntu-jp-ppa-keyring.gpg -O- | apt-key add -
- name: add apt-key JapTeam package repository
  shell: wget https://www.ubuntulinux.jp/sources.list.d/trusty.list -O /etc/apt/sources.list.d/ubuntu-ja.list
- name: updates a server
  apt: update_cache=yes
- name: install japanese
  apt: name={{item}}
  become: yes
  with_items:
    - ubuntu-defaults-ja # JapTeam package repository

#- name: install japanese man
#  apt: name={{item}}
#  become: yes
#  with_items: 
#    - manpages-ja

- name: add-apt-repository ppa:japanese-testers/mozc
  shell: add-apt-repository ppa:japanese-testers/mozc
- name: updates a server
  apt: update_cache=yes

- name: delete ibus
  become: true
  become-user: root
  shell: apt-get remove ibus
- name: install japanese
  apt: name={{item}}
  become: yes
  with_items:
   - language-pack-ja-base
   - language-pack-ja
   - fcitx
   - fcitx-mozc
   - fcitx-libs-qt5
   #- fcitx-frontend-gtk2
   #- fcitx-frontend-gtk3
   #- fcitx-frontend-qt4
   - fcitx-frontend-qt5
   #- fcitx-ui-classic
   #- fcitx-config-gtk
   - mozc-utils-gui

- name: export LC_ALL=C.UTF-8
  shell: export LC_ALL=C.UTF-8

- name: im-config -n fcitx
  shell: im-config -n fcitx
